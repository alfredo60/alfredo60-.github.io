(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-004198e6"],{1190:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12"},[a("button",{staticClass:"btn btn-primary pull-right",attrs:{"data-backdrop":"static","data-toggle":"modal","data-target":"#modal"},on:{click:t.limpiar}},[t._v(" Nuevo Usuario "),a("i",{staticClass:"fa fa-user-plus"})])])]),a("c-data-tables",{attrs:{title:"Registro de Usuarios",limite:[10,20,50,100],total:t.total,opt:t.opts},on:{paginate:t.send,refresh:t.refresh},scopedSlots:t._u([{key:"table",fn:function(){return[a("table",{staticClass:"table table-bordered table-condensed table-hover table-striped"},[a("thead",{staticClass:"text-bold"},[a("tr",[a("th",{staticClass:"col-xs-1"},[t._v("Codigo")]),a("th",[t._v("Tipo")]),a("th",[t._v("Nombre")]),a("th",[t._v("Correo")]),a("th")]),a("tr",[a("th",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.values.id,expression:"values.id",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number"},domProps:{value:t.values.id},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)},input:function(e){e.target.composing||t.$set(t.values,"id",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){t.values.id=null}}},[a("span",{staticClass:"fa fa-remove"})])])])]),a("th",[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.values.user_type,expression:"values.user_type",modifiers:{number:!0}}],staticClass:"form-control input-sm",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.$set(t.values,"user_type",e.target.multiple?a:a[0])},t.send]}},[a("option",{attrs:{value:"null"}},[t._v("Todos")]),a("option",{attrs:{value:"1"}},[t._v("Recepcion")]),a("option",{attrs:{value:"2"}},[t._v("Quimico")]),a("option",{attrs:{value:"5"}},[t._v("Administrador")])])]),a("th",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.values.name,expression:"values.name"}],staticClass:"form-control input-sm",attrs:{type:"tel"},domProps:{value:t.values.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)},input:function(e){e.target.composing||t.$set(t.values,"name",e.target.value)}}}),a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){t.values.name=null}}},[a("span",{staticClass:"fa fa-remove"})])])])]),a("th",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.values.email,expression:"values.email"}],staticClass:"form-control input-sm",attrs:{type:"text"},domProps:{value:t.values.email},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)},input:function(e){e.target.composing||t.$set(t.values,"email",e.target.value)}}}),a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){t.values.email=null}}},[a("span",{staticClass:"fa fa-remove"})])])])]),a("th")])]),a("tbody",t._l(t.model,(function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.id))]),a("td",[5==e.user_type?a("span",{staticClass:"label label-success"},[t._v("Administrador")]):t._e(),2==e.user_type?a("span",{staticClass:"label label-success"},[t._v("Quimico")]):t._e(),1==e.user_type?a("span",{staticClass:"label label-primary"},[t._v("Recepcion")]):t._e()]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.email))]),a("td",[a("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(a){return t.confirmarDelete(e.id,s)}}},[a("span",{staticClass:"fa fa-trash"})]),a("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(a){return t.editar(e,s)}}},[a("span",{staticClass:"fa fa-pencil"})])])])})),0)])]},proxy:!0}])}),a("t-usuarios",{attrs:{model:t.client},on:{store:t.storeEvent,update:t.updateEvent}}),a("modal-delete",{attrs:{model:t.confirmar},on:{onDelete:t.eliminar}})],1)},o=[],r=(a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("841c"),a("ddb0"),a("5530")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("c-modal",{attrs:{"id-modal":"modal",title:t.model.id>0?"Editar Usuario":"Registrar nuevo Usuario"},scopedSlots:t._u([{key:"body",fn:function(){return[a("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)},reset:t.onReset}},[a("ValidationObserver",{ref:"form"},[a("div",{staticClass:"box-body"},[a("div",{staticClass:"row"},[a("ValidationProvider",{attrs:{vid:"user_type",name:"tipo de usuario",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"form-group col-md-4",class:{"has-error":1==s.length}},[a("label",[t._v("Tipo de usuario")]),a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.model.user_type,expression:"model.user_type",modifiers:{number:!0}}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.$set(t.model,"user_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("Recepcion")]),a("option",{attrs:{value:"2"}},[t._v("Quimico")]),a("option",{attrs:{value:"5"}},[t._v("Administrador")])]),a("span",{staticClass:"help-block"},[t._v(t._s(s[0]))])])]}}])}),a("ValidationProvider",{attrs:{vid:"name",name:"nombre",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"form-group col-md-8",class:{"has-error":1==s.length}},[a("label",[t._v("Nombre de usuario")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.name,expression:"model.name"}],staticClass:"form-control",attrs:{type:"text",name:"nombre",autofocus:"",required:"",autocomplete:"false"},domProps:{value:t.model.name},on:{input:function(e){e.target.composing||t.$set(t.model,"name",e.target.value)}}}),a("span",{staticClass:"help-block"},[t._v(t._s(s[0]))])])]}}])})],1),a("div",{staticClass:"row"},[a("ValidationProvider",{attrs:{vid:"email",name:"correo",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"form-group col-md-12",class:{"has-error":1==s.length}},[a("label",[t._v("Correo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.email,expression:"model.email"}],staticClass:"form-control",attrs:{type:"email",name:"correo",autofocus:"",required:"",autocomplete:"false"},domProps:{value:t.model.email},on:{input:function(e){e.target.composing||t.$set(t.model,"email",e.target.value)}}}),a("span",{staticClass:"help-block"},[t._v(t._s(s[0]))])])]}}])})],1),a("div",{staticClass:"row"},[a("ValidationProvider",{attrs:{vid:"password",name:"contraseña",rules:t.model.id>0?"":"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"form-group col-md-6",class:{"has-error":1==s.length}},[a("label",[t._v("Contraseña")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.password,expression:"model.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",autofocus:"",required:!t.model.id>0,autocomplete:"false",placeholder:"Dejar en blanco para mantener la contraseña actual"},domProps:{value:t.model.password},on:{input:function(e){e.target.composing||t.$set(t.model,"password",e.target.value)}}}),a("span",{staticClass:"help-block"},[t._v(t._s(s[0]))])])]}}])}),a("ValidationProvider",{attrs:{vid:"password_confirmation",name:"repetir contraseña",rules:t.model.id>0?"":"required|confirmed:password"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"form-group col-md-6",class:{"has-error":1==s.length}},[a("label",[t._v("Repetir Contraseña")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.password_confirmation,expression:"model.password_confirmation"}],staticClass:"form-control",attrs:{type:"password",name:"password_confirmation",autofocus:"",required:!t.model.id>0,autocomplete:"false",placeholder:"Dejar en blanco para mantener la contraseña actual"},domProps:{value:t.model.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.model,"password_confirmation",e.target.value)}}}),a("span",{staticClass:"help-block"},[t._v(t._s(s[0]))])])]}}])})],1)])]),a("div",{staticClass:"box-footer"},[a("c-btn",{attrs:{type:"submit",color:"btn btn-primary",icon:"fa-check",label:t.labelSubmit}}),a("c-btn",{attrs:{type:"reset",color:"btn btn-danger pull-right",icon:"fa-remove",label:t.labelReset}})],1)],1)]},proxy:!0}])})},i=[],l=(a("4de4"),a("a9e3"),a("dde5")),u={name:"t-clientes",props:{loading:{type:Boolean,require:!1,default:!1},modelId:{type:Number,required:!1,default:0},model:{type:Object,required:!1},labelSubmit:{type:String,required:!1,default:"Guardar"},labelReset:{type:String,required:!1,default:"Cancelar"},search:{type:Boolean,required:!1,default:!1},title:{type:String,required:!1,default:"Registrar nuevo Cliente"}},methods:{onSubmit:function(){this.search?this.filter():this.validateForm()},validateForm:function(){var t=this;this.$refs.form.validate().then((function(e){e&&(t.model.id>0?t.update():t.store(),t.$refs.form.reset())}))},filter:function(){this.$emit("search",this.model),this.closeModal()},onReset:function(){this.$refs.form.reset(),this.closeModal()},store:function(){var t=this;l["a"].users.save(this.model).then((function(e){201==e.status&&(t.$toast.success(),t.$emit("store",e.data.data),t.closeModal())})).catch((function(e){422===e.response.status&&(t.$refs.form.setErrors(e.response.data.errors),t.$toast.error()),e.response.status>=500&&t.$toast.catch()}))},update:function(){var t=this;l["a"].users.update(this.model).then((function(e){200===e.status&&(t.$toast.info(),t.$emit("update",e.data.data),t.closeModal())})).catch((function(e){422===e.response.status&&(t.$refs.form.setErrors(e.response.data.errors),t.$toast.error()),e.response.status>=500&&t.$toast.catch()}))},closeModal:function(){window.$("#modal").modal("hide")}}},d=u,c=a("2877"),m=Object(c["a"])(d,n,i,!1,null,null,null),p=m.exports,f=a("ef3b"),v={name:"clientes",components:{tUsuarios:p,modalDelete:f["a"]},data:function(){return{loading:!1,model:[],confirmar:{id:0,index:null},edit:null,client:{id:0,user_type:null,name:null,email:null,password:null,password_confirmation:null},values:{id:null,user_type:null,name:null,email:null},total:0,opts:{per_page:10,page:1}}},mounted:function(){this.$emit("title","Usuarios")},methods:{onSubmit:function(){this.loading=!0},storeEvent:function(t){this.model.unshift(t),this.total+=1},updateEvent:function(t){this.model.splice(this.edit,1,t),this.edit=null,this.limpiar()},confirmarDelete:function(t,e){this.confirmar.id=t,this.confirmar.index=e,window.$("#modal-delete").modal({backdrop:!1,show:!0})},editar:function(t,e){this.setModel(t),this.edit=e,window.$("#modal").modal("show")},eliminar:function(t){var e=this;l["a"].users.destroy(t.id).then((function(a){a.data?(e.$toast.warning(),e.model.splice(t.index,1)):e.$toast.error("No se puedo eliminar el registro")})).catch((function(){e.$toast.catch()}))},setModel:function(t){this.client.id=t.id,this.client.user_type=t.user_type,this.client.name=t.name,this.client.email=t.email},limpiar:function(){this.client.id=0,this.client.user_type=null,this.client.name=null,this.client.email=null},send:function(){var t=this;l["a"].users.search(this.getParams()).then((function(e){200===e.status&&(t.model=e.data.data,t.total=e.data.total)})).catch((function(){}))},refresh:function(){this.values.id=null,this.values.user_type=null,this.values.name=null,this.values.email=null,this.send()},getParams:function(){return Object(r["a"])({},this.opts,{params:this.values})}}},b=v,h=Object(c["a"])(b,s,o,!1,null,null,null);e["default"]=h.exports},b0c0:function(t,e,a){var s=a("83ab"),o=a("9bf2").f,r=Function.prototype,n=r.toString,i=/^\s*function ([^ (]*)/,l="name";!s||l in r||o(r,l,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-004198e6.44c16ccb.js.map