(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7b21"],{"525c":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-xs-12"},[o("button",{staticClass:"btn btn-primary pull-right",attrs:{"data-backdrop":"static","data-toggle":"modal","data-target":"#modal"},on:{click:t.limpiar}},[t._v(" Nuevo Producto "),o("i",{staticClass:"fa fa-stack-exchange"})])])]),o("c-data-tables",{attrs:{title:"Listado de productos",limite:[10,20,50,100],total:t.total,opt:t.opts},on:{paginate:t.send,refresh:t.refresh},scopedSlots:t._u([{key:"table",fn:function(){return[o("table",{staticClass:"table table-bordered table-condensed"},[o("thead",[o("tr",[o("th",{staticClass:"col-md-2"},[t._v("#")]),o("th",[t._v("Nombre")]),o("th",[t._v("Precio Normal")]),o("th",[t._v("Precio Urg")]),o("th",[t._v("Precio M1")]),o("th",[t._v("Precio M2")]),o("th")]),o("tr",[o("th",[o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.values.id,expression:"values.id",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number"},domProps:{value:t.values.id},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)},input:function(e){e.target.composing||t.$set(t.values,"id",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),o("span",{staticClass:"input-group-btn"},[o("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){t.values.id=null}}},[o("span",{staticClass:"fa fa-remove"})])])])]),o("th",[o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.values.nombre,expression:"values.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text"},domProps:{value:t.values.nombre},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)},input:function(e){e.target.composing||t.$set(t.values,"nombre",e.target.value)}}}),o("span",{staticClass:"input-group-btn"},[o("button",{staticClass:"btn btn-default btn-sm",on:{click:function(e){t.values.nombre=null}}},[o("span",{staticClass:"fa fa-remove"})])])])]),o("th"),o("th"),o("th"),o("th"),o("th"),o("th")])]),o("tbody",t._l(t.model,(function(e,r){return o("tr",{key:r},[o("td",[t._v(t._s(e.id))]),o("td",[t._v(t._s(e.nombre))]),o("td",[t._v(t._s(e.precio))]),o("td",[t._v(t._s(e.precio_urg))]),o("td",[t._v(t._s(e.precio_m1))]),o("td",[t._v(t._s(e.precio_m2))]),o("td",[o("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(o){return t.confirmarDelete(e.id,r)}}},[o("span",{staticClass:"fa fa-trash"})]),o("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(o){return t.editar(e,r)}}},[o("span",{staticClass:"fa fa-pencil"})])])])})),0)])]},proxy:!0}])}),o("t-productos",{attrs:{model:t.product},on:{store:t.storeEvent,update:t.updateEvent}}),o("modal-delete",{attrs:{model:t.confirmar},on:{onDelete:t.eliminar}})],1)},a=[],s=(o("a434"),o("d3b7"),o("ac1f"),o("841c"),o("ddb0"),o("5530")),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("c-modal",{attrs:{title:t.model.id>0?"Editar Producto":"Registrar nuevo producto"},scopedSlots:t._u([{key:"body",fn:function(){return[o("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)},reset:t.onReset}},[o("ValidationObserver",{ref:"form"},[o("div",{staticClass:"box-body"},[o("div",{staticClass:"row"},[o("ValidationProvider",{attrs:{vid:"nombre",name:"nombre",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group col-md-12",class:{"has-error":1==r.length}},[o("label",[t._v("Nombre")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.model.nombre,expression:"model.nombre"},{name:"uppercase",rawName:"v-uppercase"}],staticClass:"form-control",attrs:{type:"text",name:"nombre",placeholder:"Nombre del producto o servicio",autofocus:"",required:!t.search,autocomplete:"false"},domProps:{value:t.model.nombre},on:{input:function(e){e.target.composing||t.$set(t.model,"nombre",e.target.value)}}}),o("span",{staticClass:"help-block"},[t._v(t._s(r[0]))])])]}}])}),o("ValidationProvider",{attrs:{vid:"precio",name:"precio",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group col-md-6",class:{"has-error":1==r.length}},[o("label",[t._v("Precio")]),o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-addon"},[t._v("$")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.model.precio,expression:"model.precio",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"Precio del producto o servicio",autofocus:"",required:!t.search,autocomplete:"false"},domProps:{value:t.model.precio},on:{input:function(e){e.target.composing||t.$set(t.model,"precio",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),o("span",{staticClass:"help-block"},[t._v(t._s(r[0]))])])]}}])}),o("ValidationProvider",{attrs:{vid:"precio_urg",name:"precio_urg",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group col-md-6",class:{"has-error":1==r.length}},[o("label",[t._v("Precio de Urgencia")]),o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-addon"},[t._v("$")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.model.precio_urg,expression:"model.precio_urg",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"Precio de urgencia",autofocus:"",required:!t.search,autocomplete:"false"},domProps:{value:t.model.precio_urg},on:{input:function(e){e.target.composing||t.$set(t.model,"precio_urg",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),o("span",{staticClass:"help-block"},[t._v(t._s(r[0]))])])]}}])}),o("ValidationProvider",{attrs:{vid:"precio_m1",name:"precio_m1",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group col-md-6",class:{"has-error":1==r.length}},[o("label",[t._v("Precio maquila 1")]),o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-addon"},[t._v("$")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.model.precio_m1,expression:"model.precio_m1",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"Precio maquila 1",autofocus:"",required:!t.search,autocomplete:"false"},domProps:{value:t.model.precio_m1},on:{input:function(e){e.target.composing||t.$set(t.model,"precio_m1",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),o("span",{staticClass:"help-block"},[t._v(t._s(r[0]))])])]}}])}),o("ValidationProvider",{attrs:{vid:"precio_m2",name:"precio_m2",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group col-md-6",class:{"has-error":1==r.length}},[o("label",[t._v("Precio maquila 2")]),o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-addon"},[t._v("$")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.model.precio_m2,expression:"model.precio_m2",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"Precio maquila 2",autofocus:"",required:!t.search,autocomplete:"false"},domProps:{value:t.model.precio_m2},on:{input:function(e){e.target.composing||t.$set(t.model,"precio_m2",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),o("span",{staticClass:"help-block"},[t._v(t._s(r[0]))])])]}}])})],1)])]),o("div",{staticClass:"box-footer"},[o("c-btn",{attrs:{type:"submit",color:"btn btn-primary",icon:"fa-check",label:t.labelSubmit}}),o("c-btn",{attrs:{"data-dismiss":"modal",type:"reset",color:"btn btn-danger pull-right",icon:"fa-remove",label:t.labelReset},on:{click:t.closeModal}})],1)],1)]},proxy:!0}])})},n=[],l=o("dde5"),u={name:"t-clientes",props:{loading:{type:Boolean,require:!1,default:!1},model:{type:Object,required:!1},labelSubmit:{type:String,required:!1,default:"Guardar"},labelReset:{type:String,required:!1,default:"Cancelar"},search:{type:Boolean,required:!1,default:!1}},methods:{onSubmit:function(){this.validateForm()},validateForm:function(){var t=this;this.$refs.form.validate().then((function(e){e&&(t.model.id>0?t.update():t.store())}))},onReset:function(){this.$refs.form.reset()},store:function(){var t=this;l["a"].productos.save(this.model).then((function(e){201===e.status&&(t.$toast.success(),t.$emit("store",e.data.data),t.closeModal())})).catch((function(e){422==e.response.status&&(t.$refs.form.setErrors(e.response.data.errors),t.$toast.error()),e.response.status>=500&&t.$toast.catch()}))},update:function(){var t=this;l["a"].productos.update(this.model).then((function(e){200===e.status&&(t.$toast.info(),t.$emit("update",e.data.data),t.closeModal())})).catch((function(e){422===e.response.status&&(t.$refs.form.setErrors(e.response.data.errors),t.$toast.error()),e.response.status>=500&&t.$toast.catch()}))},closeModal:function(){window.$("#modal").modal("hide")}}},c=u,d=o("2877"),p=Object(d["a"])(c,i,n,!1,null,null,null),m=p.exports,f=o("ef3b"),v={name:"productos",components:{tProductos:m,modalDelete:f["a"]},data:function(){return{loading:!1,model:[],edit:null,confirmar:{id:0,index:null},product:{id:0,nombre:null,precio:null,precio_urg:null,precio_m1:null,precio_m2:null},values:{id:null,nombre:null,precio:null,precio_urg:null,precio_m1:null,precio_m2:null},total:0,opts:{per_page:10,page:1}}},mounted:function(){this.$emit("title","Productos")},methods:{onSubmit:function(){this.loading=!0},storeEvent:function(t){this.model.unshift(t),this.total+=1},updateEvent:function(t){this.model.splice(this.edit,1,t),this.edit=null,this.limpiar()},confirmarDelete:function(t,e){this.confirmar.id=t,this.confirmar.index=e,window.$("#modal-delete").modal({backdrop:!1,show:!0})},editar:function(t,e){this.setModel(t),this.edit=e,window.$("#modal").modal("show")},eliminar:function(t){var e=this;l["a"].productos.destroy(t.id).then((function(o){o.data?(e.$toast.warning(),e.model.splice(t.index,1)):e.$toast.error("No se puedo eliminar el registro")})).catch((function(){e.$toast.catch()}))},setModel:function(t){this.product.id=t.id,this.product.nombre=t.nombre,this.product.precio=t.precio,this.product.precio_urg=t.precio_urg,this.product.precio_m1=t.precio_m1,this.product.precio_m2=t.precio_m2},limpiar:function(){this.product.id=0,this.product.nombre=null,this.product.precio=null,this.product.precio_urg=null,this.product.precio_m1=null,this.product.precio_m2=null},clearValues:function(){this.values.id=null,this.values.nombre=null,this.values.precio=null,this.values.precio_urg=null,this.values.precio_m1=null,this.values.precio_m2=null},send:function(){var t=this;l["a"].productos.search(this.getParams()).then((function(e){200===e.status&&(t.model=e.data.data,t.total=e.data.total)})).catch((function(){}))},refresh:function(){this.clearValues(),this.send()},getParams:function(){return Object(s["a"])({},this.opts,{params:this.values})}}},b=v,h=Object(d["a"])(b,r,a,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0c7b21.74230ab6.js.map